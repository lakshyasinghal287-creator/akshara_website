<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Akshara Hospital OPD</title>

  <!-- Fonts: Quicksand for headings & body -->
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- small font override to ensure Quicksand is used immediately -->
  <style>
    body, input, select, textarea, button {
      font-family: "Quicksand", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    h1, h2, h3, .hero h1, .brand-title {
      font-family: "Quicksand", "Quicksand", sans-serif;
      letter-spacing: -0.02em;
    }
    /* keep tile-icon SVG sizing */
    .tile-icon svg { display:block; width:48px; height:48px; }
  </style>

  <!-- your main stylesheet -->
  <link rel="stylesheet" href="style.css">

<!-- Fix: ensure only one screen is visible at a time; default show #homeScreen -->
<style>
  /* Hide all screen panels by default; JS should add 'active' class to show one */
  .screen { display: none !important; }
  .screen.active { display: block !important; }
  /* fallback: if JS fails, show home screen */
  #homeScreen.screen { display: block !important; }
</style>
</head>
<body>
  <!-- HEADER -->
  <header class="app-header">
    <div class="left">
      <img src="akshara_logo.png" alt="Akshara Hospital" class="logo"/>
      <div class="brand">
        <div class="brand-title">Akshara Hospital</div>
        <div class="brand-sub">OPD — Queue Manager</div>
      </div>
    </div>
    <div class="right">
      <div id="currentTime" class="clock"></div>
    </div>
  </header>

  <main class="stage">
    <!-- HOME PAGE -->
    <section id="homeScreen" class="screen active card fade home-page screen active">
      <div class="home-container">
        <div class="hero">
          <!-- Doctor Profile -->
          <div class="doctor-profile" style="justify-content:flex-start; width:100%;">
            <img src="doctor_placeholder.png" alt="Dr. Dhiraj Singhal" class="doctor-img">
            <div class="doctor-info" style="text-align:left;">
              <h2>Dr. Dhiraj Singhal</h2>
              <p class="designation">Physician — Diabetes</p>
              <p class="tagline">Expert care in diabetes management with compassion and precision.</p>
            </div>
          </div>

          <!-- Welcome Text -->
          <div class="hospital-info" style="text-align:left;">
            <h1>Welcome to Akshara OPD</h1>
            <p class="lead">
              Akshara Hospital — a multi-speciality healthcare centre in Gamma 2 — is committed to providing 
              comprehensive medical services. This online queue system helps patients save time and 
              monitor consultation progress live.
            </p>
          </div>

          <!-- NAVIGATION TILES -->
          <div class="tile-container" aria-label="Main navigation tiles">
            <!-- Reception tile (clipboard-list icon) -->
            <div id="openLogin" class="tile" role="button" tabindex="0" aria-pressed="false" title="Reception - manage queue">
              <div class="tile-icon" aria-hidden="true">
                <!-- clipboard-list (simplified filled icon) -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="none">
                  <g transform="translate(0,0)">
                    <rect x="5.5" y="4.5" width="13" height="15" rx="2" fill="#2cc5b8"/>
                    <rect x="10" y="8" width="7" height="2" rx="1" fill="#04243a"/>
                    <rect x="10" y="12" width="7" height="2" rx="1" fill="#04243a"/>
                    <circle cx="7.5" cy="9" r="1.1" fill="#04243a"></circle>
                    <circle cx="7.5" cy="13" r="1.1" fill="#04243a"></circle>
                  </g>
                </svg>
              </div>
              <div class="tile-title">Reception</div>
              <div class="tile-sub">Add patients • Manage queue • Export list</div>
            </div>

            <!-- Patient tile (user-check icon) -->
            <div id="openPatient" class="tile" role="button" tabindex="0" title="Patient - check your ETA">
              <div class="tile-icon" aria-hidden="true">
                <!-- user-check (simplified filled icon) -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="none">
                  <g>
                    <rect x="5.5" y="5.5" width="13" height="13" rx="2.2" fill="#2cc5b8"></rect>
                    <circle cx="12" cy="9" r="2.2" fill="#04243a"></circle>
                    <path d="M8.5 15c.9-1.3 2.3-2 3.5-2 1.2 0 2.6.7 3.5 2" fill="#04243a"></path>
                    <path d="M16 10.5l1.6 1.6L20 9.7" stroke="#04243a" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>
                  </g>
                </svg>
              </div>
              <div class="tile-title">Patient</div>
              <div class="tile-sub">Check your turn • Track ETA • Arrive on time</div>
            </div>
          </div>

          <!-- ABOUT HOSPITAL -->
          <div class="about-hospital" role="region" aria-label="About Akshara Hospital">
            <h3>About Akshara Hospital</h3>
            <p>
              Located in the heart of Gamma-2, Akshara Hospital offers a complete range of healthcare services — 
              General Medicine, Pulmonology, Diabetes Care, Dermatology, Paediatrics, Psychiatry, Physiotherapy, Urology and Surgery.  
              Our mission is to combine advanced technology with personalised, empathetic medical care.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- RECEPTION LOGIN -->
    <section id="loginScreen" class="screen card fade">
      <h2>Receptionist Login</h2>
      <form id="loginForm" class="form" autocomplete="on">
        <label class="field"><span class="label">Username</span>
          <input id="username" name="username" autocomplete="username" required>
        </label>
        <label class="field"><span class="label">Password</span>
          <input id="password" name="password" type="password" autocomplete="current-password" required>
        </label>
        <div class="row spaced" style="justify-content:center;">
          <button type="submit" class="btn primary">Sign in</button>
          <button id="backHomeFromLogin" type="button" class="btn ghost">Back</button>
        </div>
        <div id="loginError" class="error" role="alert" aria-live="polite"></div>
      </form>
    </section>

    <!-- RECEPTION SCREEN -->
    <section id="receptionScreen" class="screen card fade reception-panel">
      <div class="topbar">
        <div>Logged in as <strong id="currentUser">—</strong></div>
        <button id="logoutBtn" class="btn ghost">Logout</button>
        <button id="receptionDisplayBtn" class="btn primary" title="Open reception display (TV)">Reception Display</button>

      </div>

      <div class="grid">
        <div class="left card-min">
          <h3>Add patient</h3>
          <form id="patientForm" class="form-compact">
            <label class="field"><span class="label">Full name</span><input id="p_name" required></label>
            <div class="row">
              <label class="field small" style="flex:1"><span class="label">Age</span><input id="p_age" type="number"></label>
              <label class="field small" style="flex:1"><span class="label">Sex</span>
                <select id="p_sex"><option>Male</option><option>Female</option><option>Other</option></select>
              </label>
            </div>
            <label class="field"><span class="label">Phone (required)</span><input id="p_phone" placeholder="+91 98765 43210" required pattern="^\+?[0-9\s\-]{7,15}$" /></label>
            <label class="field"><span class="label">Booked time (optional)</span><input id="p_arrival" type="datetime-local"></label>
            <label class="field"><span class="label">Est. consult (min)</span><input id="p_est" type="number" placeholder="8"></label>

            <div class="row spaced">
              <button class="btn primary" type="submit">Add patient</button>
              <button id="resetPatients" type="button" class="btn ghost">Reset list</button>
            </div>
          </form>

          <hr>
          <h4>Doctor</h4>
          <div class="row align-center" style="gap:10px;">
            <button id="doctorToggle" class="btn ghost">Mark doctor present</button>
            <input id="doctorArrival" type="datetime-local" />
            <button id="setArrival" class="btn small">Set</button>
          </div>
          <div class="muted small">Doctor presence: <strong id="doctorPresence">unknown</strong></div>

<hr>
<h4>Doctor Shifts</h4>
<div class="shift-form">
  <label>
    <span class="label">Shift Start</span>
    <input type="datetime-local" id="shiftStart">
  </label>
  <label>
    <span class="label">Shift End</span>
    <input type="datetime-local" id="shiftEnd">
  </label>
  <button id="addShiftBtn" class="btn primary small">Add Shift</button>
</div>

<div id="shiftList" class="shift-list"></div>

        </div>

        <div class="right card-min">
          <h3>Queue</h3>
          <div class="controls">
            <input id="searchToken" placeholder="Search token/name/phone" class="search" />
          </div>
          <div id="queueContainer" class="queue" aria-live="polite"></div>

          <div class="row spaced end-actions">
            <button id="downloadCSV" class="btn small">Download CSV</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PATIENT SCREEN -->
    <section id="patientScreen" class="screen card fade">
      <h3>Find your appointment</h3>
      <div class="row">
        <input id="tokenInput" placeholder="Token, name or phone" />
        <button id="checkTokenBtn" class="btn primary">Search</button>
        <button id="backHomeFromPatient" class="btn ghost">Back</button>
      </div>
      <div id="tokenResult" class="token-result" aria-live="polite"></div>
    </section>
  </main>

  <footer class="footer">© Akshara Hospital | Designed for Patient Ease</footer>

  <!-- keep socket and client script -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js"></script>
</body>
</html>
